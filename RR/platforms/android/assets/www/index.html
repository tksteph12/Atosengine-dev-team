<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <title>Resource Request</title>
    </head>
    <body>
       <header class="header">
            Search
        </header>
        <section class="view">
            <section class="panel">
                <form action="listRR.html" method="get" name="searchform">
                  <input name="idrr" type="text" placeholder="ID RR">
                  <input type="text" placeholder="CompÃ©tences">
                  <select id="idgcm" name="gcm">
                  </select>
                  <select name="ville">
                      <option value="tous">Toute villes</option>
                      <option value="lyon">Lyon</option>
                      <option value="paris">Paris</option>
                  </select>
                  <select name="client">
                      <option value="tous">Tout clients</option>
                      <option value="edf">EDF</option>
                      <option value="renault">Renault</option>
                  <input type="submit">
                </form>
               
            </section>
        </section>
        <div id="test">hello</div>

        <nav class="nav">
           
        </nav>

        <script src="vendors/jquery/js/jquery-2.1.0.min.js"></script>
        <script type="js/app.js"></script>

        <script>
            $(document).ready(function() {
                fileSelectBox();
            });


            function fileSelectBox() {
                var selectBox = $('#idgcm');
                var url = "http://192.168.43.138:8080/RestWSDB/webresources/com.atos.restfull.gcm";
                var options = retrieveFrom(url);

                for(var i = 0, l = options.length; i < l; i++){
                    var option = options[i];
                    selectBox[0].options.add( new Option(option.code, option.idGcm, option.selected) );
                }
            }

           
            function retrieveFrom(url){
                //retrieves the data from the url passed in parameters
                var results;
                $.ajax({
                    type: "GET",
                    url: url,
                    async: false,
                    dataType: "json",
                    success: function(data) {
                      results = data;
                    },
                    error : function(){
                        console.log("Failed!!");
                    },
                  });
                return results;
            }
            

            
        </script>
    </body>
</html>
